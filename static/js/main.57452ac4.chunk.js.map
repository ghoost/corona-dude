{"version":3,"sources":["features/player/player_walk.png","features/map/index.js","config/constants.js","features/player/reducer.js","features/map/reducer.js","config/store.js","data/maps/index.js","features/player/index.js","features/player/movement.js","features/world/index.js","App.js","index.js"],"names":["module","exports","MapTile","props","tile","type","getTileSprite","className","style","height","width","MapRow","tiles","map","index","key","connect","state","MAP_WIDTH","MAP_HEIGHT","row","initialState","position","spriteLocation","direction","walkIndex","moveCount","animated","showAnimation","gameOver","rootReducer","combineReducers","player","action","payload","update","$set","Store","createStore","window","__REDUX_DEVTOOLS_EXTENSION__","l2","Levels","level1","level2","level3","timer","getSpriteLocation","SPRITE_SIZE","observeBoundaries","oldPos","newPos","dispatchMove","moves","getState","dispatch","getWalkIndex","newTiles","produce","draft","y","x","setTimeout","attemptMove","console","log","getNewPosition","next","observeImpassable","addEventListener","e","preventDefault","keyCode","handleKeyDown","handleMovement","useSelector","movement","transition","top","left","backgroundImage","walkSprite","backgroundPositionY","background","maxWidth","overflow","World","margin","clipPath","App","onClick","ReactDOM","render","store","document","getElementById"],"mappings":"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","file":"static/js/main.57452ac4.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/player_walk.9f19440f.png\";","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { SPRITE_SIZE, MAP_WIDTH, MAP_HEIGHT } from \"../../config/constants\";\r\nfunction getTileSprite(type) {\r\n  switch (type) {\r\n    case 0:\r\n      return \"grass\";\r\n    case 1:\r\n      return \"corona\";\r\n    case 2:\r\n      return \"grave\";\r\n    case 3:\r\n      return \"spiral\";\r\n    case 5:\r\n      return \"farm\";\r\n    case 6:\r\n      return \"tree\";\r\n    case 7:\r\n      return \"trees\";\r\n    case 8:\r\n      return \"stone\";\r\n    case 9:\r\n      return \"big-tree\";\r\n    case 10:\r\n      return \"mountain-1\";\r\n    case 11:\r\n      return \"mountain-2\";\r\n    case 12:\r\n      return \"mountain-3\";\r\n    case 13:\r\n      return \"mountain-4\";\r\n    default:\r\n  }\r\n}\r\n\r\nfunction MapTile(props) {\r\n  const tile = getTileSprite(\r\n    typeof props.tile === \"object\" ? props.tile.tile : props.tile\r\n  );\r\n  return (\r\n    <div\r\n      className={`tile ${tile}`}\r\n      style={{\r\n        height: SPRITE_SIZE,\r\n        width: SPRITE_SIZE\r\n      }}\r\n    ></div>\r\n  );\r\n}\r\nfunction MapRow(props) {\r\n  return (\r\n    <div className=\"row\">\r\n      {props.tiles.map((tile, index) => (\r\n        <MapTile key={index} tile={tile} />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\nfunction Map(props) {\r\n  return (\r\n    <div\r\n      className=\"map\"\r\n      style={{\r\n        width: MAP_WIDTH + \"px\",\r\n        height: MAP_HEIGHT + \"px\"\r\n      }}\r\n    >\r\n      {props.tiles.map((row, index) => (\r\n        <MapRow key={index} tiles={row} />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    tiles: state.map.tiles\r\n  };\r\n}\r\nexport default connect(mapStateToProps)(Map);\r\n","export const SPRITE_SIZE = 40;\r\nexport const MAP_HEIGHT = SPRITE_SIZE * 10;\r\nexport const MAP_WIDTH = SPRITE_SIZE * 20;\r\n","import update from \"react-addons-update\";\r\n\r\nconst initialState = {\r\n  position: [0, 0],\r\n  spriteLocation: \"0px\",\r\n  direction: \"east\",\r\n  walkIndex: 0,\r\n  moveCount: 10,\r\n  animated: false,\r\n  showAnimation: false,\r\n  gameOver: false\r\n};\r\n\r\nexport const playerReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case \"MOVE_PLAYER\":\r\n      return {\r\n        ...action.payload\r\n      };\r\n    case \"IS_ANIMATED\":\r\n      return update(state, {\r\n        animated: { $set: action.payload.animated }\r\n      });\r\n    case \"SET_MOVES\":\r\n      return update(state, {\r\n        moveCount: { $set: action.payload.moveCount },\r\n        gameOver: { $set: action.payload.gameOver },\r\n        showAnimation: { $set: action.payload.showAnimation }\r\n      });\r\n    case \"RESET_PLAYER\":\r\n      state = initialState;\r\n      return state;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","const initialState = {\r\n  tiles: []\r\n};\r\nexport const mapReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case \"ADD_TILES\":\r\n      state = action.payload;\r\n      //console.log(state);\r\n      return state;\r\n    case \"RESET_TILES\":\r\n      state = initialState;\r\n      return state;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { createStore, combineReducers } from \"redux\";\r\nimport { playerReducer } from \"../features/player/reducer\";\r\nimport { mapReducer } from \"../features/map/reducer\";\r\n\r\nconst rootReducer = combineReducers({\r\n  player: playerReducer,\r\n  map: mapReducer\r\n});\r\n\r\nexport const Store = createStore(\r\n  rootReducer /* preloadedState, */,\r\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\r\n);\r\n","const l1 = { tile: 3, map: 1 };\r\nconst l2 = { tile: 3, map: 2 };\r\nconst l3 = { tile: 3, map: 3 };\r\n\r\nexport const Levels = {\r\n  level1: [\r\n    [0, l2, 5, 0, 7, 7, 6, 0, 0, 0, 9, 0, 0, 0, 0, 0, 0, 6, 0, 9],\r\n    [0, 0, 0, 0, 5, 0, 0, 7, 0, 0, 8, 0, 1, 0, 0, 0, 0, 0, 0, 0],\r\n    [1, 0, 0, 0, 7, 0, 6, 0, 7, 0, 0, 0, 0, 0, 0, 0, 7, 0, 0, 1],\r\n    [0, 0, 0, 0, 0, 1, 5, 0, 0, 0, 7, 0, 0, 0, 0, 0, 6, 0, 0, 0],\r\n    [0, 0, 0, 0, 5, 0, 0, 8, 0, 7, 8, 0, 0, 1, 0, 0, 7, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 0, 0, 0, 0, 8, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 6, 6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0, 7, 0, 0, 0, 0, 0],\r\n    [0, 0, 10, 11, 0, 0, 8, 7, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, l2, 12, 13, 0, 1, 0, 0, 0, 0, 0, 10, 11, 0, 0, 0, 0, 0, 0, 1]\r\n  ],\r\n  level2: [\r\n    [0, l1, 8, 0, 8, 7, 6, 0, 0, 0, 9, 0, 0, 0, 0, 0, 0, 6, 0, 9],\r\n    [0, 0, 0, 0, 5, 0, 0, 7, 0, 0, 8, 0, 1, 0, 0, 0, 0, 0, 0, 0],\r\n    [5, 0, 0, 9, 0, 0, 6, 0, 7, 0, 0, 0, 0, 0, 0, 0, 7, 0, 0, 1],\r\n    [0, 0, 7, 0, 0, 1, 5, 0, 0, 0, 7, 0, 0, 0, 0, 0, 6, 0, 0, 0],\r\n    [0, 0, 0, 0, 5, 0, 0, 8, l3, 7, 8, 0, 0, 1, 0, 0, 7, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 8, 9, 0, 0, 0, 0, 8, 0, 0, 0, 0, 0],\r\n    [0, 6, 6, 0, 0, 0, 0, 0, 6, 6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [1, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0, 7, 0, 0, 0, 0, 0],\r\n    [0, 0, 10, 11, 0, 0, 8, 7, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 12, 13, 0, 1, 0, 0, 0, 0, 0, 10, 11, 0, 0, 0, 0, 0, 0, 1]\r\n  ],\r\n  level3: [\r\n    [0, 0, 0, 0, 8, 7, 6, 0, 0, 0, 9, 0, 0, 0, 0, 0, 0, 6, 0, 9],\r\n    [0, 0, 0, 0, 5, 0, 0, 7, 0, 0, 8, 0, 1, 0, 0, 0, 0, 0, 0, 0],\r\n    [5, 0, 0, 9, 0, 0, 6, 0, 7, 0, 0, 0, 0, 0, 0, 0, 7, 0, 0, 1],\r\n    [0, 0, 9, 0, 0, 0, 1, 0, 0, 0, 7, 0, 0, 0, 0, 0, 6, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, l2, 0, 0, 0, 0, 1, 0, 0, 7, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 0, 0, 0, 0, 8, 0, 0, 0, 0, 0],\r\n    [0, 6, 6, 0, 0, 0, 0, 0, 5, 6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [1, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0, 7, 0, 0, 0, 0, 0],\r\n    [0, 0, 10, 6, 0, 0, 8, 7, 6, 6, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 12, 13, 0, 1, 0, 0, 0, 0, 0, 10, 11, 0, 0, 0, 0, 0, 0, 1]\r\n  ]\r\n};\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport walkSprite from \"./player_walk.png\";\r\nimport handleMovement from \"./movement\";\r\nimport { SPRITE_SIZE } from \"../../config/constants\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nfunction Player(props) {\r\n  const position = useSelector(state => state.player.spriteLocation);\r\n  const animated = useSelector(state => state.player.animated);\r\n  const showAnimation = useSelector(state => state.player.showAnimation);\r\n  const moves = useSelector(state => state.player.moveCount);\r\n  let movement = (moves / 10) * 100;\r\n  const Moves = () => {\r\n    return (\r\n      <div\r\n        className=\"moves\"\r\n        style={{\r\n          background: moves > 10 ? \"#0f0\" : \"#f00\",\r\n          position: \"absolute\",\r\n          top: \"-5px\",\r\n          width: movement + \"%\",\r\n          maxWidth: \"100%\",\r\n          height: \"4px\",\r\n          overflow: \"hidden\",\r\n          transition: \"transition: width 1s ease-in-out\"\r\n        }}\r\n      >\r\n        {moves}\r\n      </div>\r\n    );\r\n  };\r\n  return (\r\n    <div\r\n      className={`player ${animated ? \"animated\" : \"\"}`}\r\n      style={{\r\n        transition: \"top 0.5s linear, left 0.5s linear\",\r\n        position: \"absolute\",\r\n        top: props.position[1],\r\n        left: props.position[0],\r\n        backgroundImage: `url('${walkSprite}')`,\r\n        //backgroundPosition: \"0px 0px\",\r\n        backgroundPositionY: position,\r\n        width: SPRITE_SIZE + \"px\",\r\n        height: SPRITE_SIZE + \"px\"\r\n      }}\r\n    >\r\n      <Moves />\r\n\r\n      <div\r\n        className={`add-points ${animated && showAnimation ? \"animated\" : \"\"}`}\r\n      >\r\n        10\r\n      </div>\r\n      <div className={`shadow ${showAnimation ? \"animated\" : \"\"}`}></div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    ...state.player\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(handleMovement(Player));\r\n","import { Store } from \"../../config/store\";\r\nimport { SPRITE_SIZE, MAP_WIDTH, MAP_HEIGHT } from \"../../config/constants\";\r\nimport produce from \"immer\";\r\nimport { Levels } from \"../../data/maps\";\r\n\r\nexport default function handleMovement(player) {\r\n  let timer = null;\r\n  function getNewPosition(oldPos, direction) {\r\n    switch (direction) {\r\n      case \"WEST\":\r\n        return [oldPos[0] - SPRITE_SIZE, oldPos[1]];\r\n      case \"EAST\":\r\n        return [oldPos[0] + SPRITE_SIZE, oldPos[1]];\r\n      case \"NORTH\":\r\n        return [oldPos[0], oldPos[1] - SPRITE_SIZE];\r\n      case \"SOUTH\":\r\n        return [oldPos[0], oldPos[1] + SPRITE_SIZE];\r\n      default:\r\n        console.log(direction);\r\n    }\r\n  }\r\n\r\n  function getSpriteLocation(direction, walkIndex) {\r\n    switch (direction) {\r\n      case \"SOUTH\":\r\n        return `${SPRITE_SIZE * 0}px`;\r\n      case \"EAST\":\r\n        return `${SPRITE_SIZE * 1}px`;\r\n      case \"WEST\":\r\n        return `${SPRITE_SIZE * 2}px`;\r\n      case \"NORTH\":\r\n        return `${SPRITE_SIZE * 3}px`;\r\n      default:\r\n    }\r\n  }\r\n\r\n  function getWalkIndex() {\r\n    const walkIndex = Store.getState().player.walkIndex;\r\n    return walkIndex >= 8 ? 0 : walkIndex + 1;\r\n  }\r\n  function observeBoundaries(oldPos, newPos) {\r\n    if (\r\n      newPos[0] >= 0 &&\r\n      newPos[0] <= MAP_WIDTH - SPRITE_SIZE &&\r\n      newPos[1] >= 0 &&\r\n      newPos[1] <= MAP_HEIGHT - SPRITE_SIZE\r\n    ) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  function observeImpassable(oldPos, newPos) {\r\n    const tiles = Store.getState().map.tiles;\r\n    const y = newPos[1] / SPRITE_SIZE;\r\n    const x = newPos[0] / SPRITE_SIZE;\r\n    let next, map;\r\n    if (typeof tiles[y][x] === \"object\") {\r\n      next = tiles[y][x].tile;\r\n      map = tiles[y][x].map;\r\n    } else {\r\n      next = tiles[y][x];\r\n    }\r\n    const nextTile = next;\r\n    return [nextTile < 5, nextTile, map];\r\n  }\r\n\r\n  function dispatchMove(direction, newPos, tile, map) {\r\n    if (timer == null) {\r\n      let moves = Store.getState().player.moveCount;\r\n      moves -= 1;\r\n      const gameOver = moves < 0 ? true : false;\r\n      if (gameOver) {\r\n        Store.dispatch({\r\n          type: \"SET_MOVES\",\r\n          payload: {\r\n            moveCount: 0,\r\n            showAnimation: true,\r\n            gameOver: gameOver\r\n          }\r\n        });\r\n        return;\r\n      }\r\n\r\n      const walkIndex = getWalkIndex();\r\n      Store.dispatch({\r\n        type: \"MOVE_PLAYER\",\r\n        payload: {\r\n          position: newPos,\r\n          direction,\r\n          walkIndex,\r\n          spriteLocation: getSpriteLocation(direction, walkIndex),\r\n          animated: true,\r\n          moveCount: moves,\r\n          gameOver: gameOver\r\n        }\r\n      });\r\n      if (tile === 1) {\r\n        const newTiles = produce(Store.getState().map.tiles, draft => {\r\n          const y = newPos[1] / SPRITE_SIZE;\r\n          const x = newPos[0] / SPRITE_SIZE;\r\n          draft[y][x] = 0;\r\n        });\r\n        if (newTiles) {\r\n          Store.dispatch({\r\n            type: \"SET_MOVES\",\r\n            payload: {\r\n              moveCount: moves + 10,\r\n              showAnimation: true,\r\n              gameOver: gameOver\r\n            }\r\n          });\r\n          Store.dispatch({ type: \"ADD_TILES\", payload: { tiles: newTiles } });\r\n        }\r\n      }\r\n\r\n      if (tile === 3) {\r\n        if (map > 0) {\r\n          Store.dispatch({\r\n            type: \"ADD_TILES\",\r\n            payload: { tiles: Levels[\"level\" + map] }\r\n          });\r\n        }\r\n      }\r\n      timer = setTimeout(() => {\r\n        timer = null;\r\n        Store.dispatch({\r\n          type: \"IS_ANIMATED\",\r\n          payload: {\r\n            animated: false\r\n          }\r\n        });\r\n      }, 500);\r\n    } else {\r\n    }\r\n  }\r\n\r\n  function attemptMove(direction) {\r\n    const oldPos = Store.getState().player.position;\r\n    const newPos = getNewPosition(oldPos, direction);\r\n    const boundaries = observeBoundaries(oldPos, newPos);\r\n    if (boundaries) {\r\n      const tile = observeImpassable(oldPos, newPos);\r\n      if (observeBoundaries(oldPos, newPos) && tile[0])\r\n        dispatchMove(direction, newPos, tile[1], tile[2]);\r\n    }\r\n  }\r\n  function handleKeyDown(e) {\r\n    e.preventDefault();\r\n    switch (e.keyCode) {\r\n      case 37:\r\n        return attemptMove(\"WEST\");\r\n      case 38:\r\n        return attemptMove(\"NORTH\");\r\n      case 39:\r\n        return attemptMove(\"EAST\");\r\n      case 40:\r\n        return attemptMove(\"SOUTH\");\r\n      default:\r\n        console.log(e.keyCode);\r\n    }\r\n  }\r\n  window.addEventListener(\"keydown\", e => {\r\n    handleKeyDown(e);\r\n  });\r\n  return player;\r\n}\r\n","import React from \"react\";\r\nimport Map from \"../map\";\r\nimport Player from \"../player\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { SPRITE_SIZE, MAP_WIDTH, MAP_HEIGHT } from \"../../config/constants\";\r\n\r\nexport function World(props) {\r\n  const position = useSelector(state => state.player.position);\r\n  return (\r\n    <>\r\n      <div\r\n        className=\"world\"\r\n        style={{\r\n          transition: \"all 0.5s linear\",\r\n          position: \"relative\",\r\n          width: MAP_WIDTH + \"px\",\r\n          height: MAP_HEIGHT + \"px\",\r\n          margin: \"20px auto\",\r\n          clipPath:\r\n            \"circle(150px at \" +\r\n            (position[0] + SPRITE_SIZE / 2) +\r\n            \"px \" +\r\n            (position[1] + SPRITE_SIZE / 2) +\r\n            \"px)\"\r\n        }}\r\n      >\r\n        <Map />\r\n        <Player />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\nimport { World } from \"./features/world\";\nimport { Levels } from \"./data/maps/\";\nimport { useSelector } from \"react-redux\";\nimport { Store } from \"./config/store\";\n\nfunction App() {\n  const gameOver = useSelector(state => state.player.gameOver);\n\n  const Restart = () => {\n    const handleClick = () => {\n      Store.dispatch({\n        type: \"ADD_TILES\",\n        payload: { tiles: Levels[\"level1\"] }\n      });\n      Store.dispatch({ type: \"RESET_PLAYER\", payload: {} });\n    };\n\n    return <button onClick={handleClick}>RESTART</button>;\n  };\n\n  Store.dispatch({ type: \"ADD_TILES\", payload: { tiles: Levels[\"level1\"] } });\n\n  return (\n    <>\n      {!gameOver && <World />}\n      {gameOver && (\n        <div className=\"game-over\">\n          <div>\n            GAME OVER\n            <Restart />\n          </div>\n        </div>\n      )}\n    </>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { Provider } from \"react-redux\";\nimport { Store } from \"./config/store\";\nimport \"./styles.css\";\n\nReactDOM.render(\n  <Provider store={Store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}