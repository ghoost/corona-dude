(this["webpackJsonpcorona-dude"]=this["webpackJsonpcorona-dude"]||[]).push([[0],{12:function(e,t,n){e.exports=n.p+"static/media/player_walk.9f19440f.png"},13:function(e,t,n){e.exports=n(28)},18:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(3),c=n.n(o),i=(n(18),n(1));function l(e){var t=function(e){switch(e){case 0:return"grass";case 1:return"corona";case 2:return"grave";case 3:return"spiral";case 4:return"toilet";case 5:return"farm";case 6:return"tree";case 7:return"trees";case 8:return"stone";case 9:return"big-tree";case 10:return"mountain-1";case 11:return"mountain-2";case 12:return"mountain-3";case 13:return"mountain-4"}}("object"===typeof e.tile?e.tile.tile:e.tile);return r.a.createElement("div",{className:"tile ".concat(t),style:{height:40,width:40}})}function s(e){return r.a.createElement("div",{className:"row"},e.tiles.map((function(e,t){return r.a.createElement(l,{key:t,tile:e})})))}var u=Object(i.b)((function(e){return{tiles:e.map.tiles}}))((function(e){return r.a.createElement("div",{className:"map",style:{width:"800px",height:"400px"}},e.tiles.map((function(e,t){return r.a.createElement(s,{key:t,tiles:e})})))})),d=n(4),p=n(12),m=n.n(p),E=n(2),v=n(9),y=n.n(v),f={position:[0,0],spriteLocation:"0px",direction:"east",walkIndex:0,moveCount:10,addScore:0,animated:!1,showAnimation:!1,gameOver:!1},h={tiles:[]},w=Object(E.b)({player:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MOVE_PLAYER":return Object(d.a)({},t.payload);case"IS_ANIMATED":return y()(e,{animated:{$set:t.payload.animated}});case"SET_MOVES":return console.log(t.payload.addScore),y()(e,{moveCount:{$set:t.payload.moveCount},addScore:{$set:t.payload.addScore},gameOver:{$set:t.payload.gameOver},showAnimation:{$set:t.payload.showAnimation}});case"RESET_PLAYER":return e=f;default:return e}},map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TILES":return e=t.payload;case"RESET_TILES":return e=h;default:return e}}}),S=Object(E.c)(w,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),O=n(10),g={tile:3,map:2},b={level1:[[0,g,5,0,7,7,6,0,0,0,9,0,0,0,0,0,0,6,0,9],[0,0,0,0,5,0,0,7,0,0,8,0,1,0,0,0,0,0,0,0],[1,0,0,0,7,0,6,0,7,0,0,0,0,0,0,0,7,0,0,1],[0,4,0,0,0,1,5,0,0,0,7,0,0,0,0,0,6,0,0,0],[0,0,0,0,5,0,0,8,0,7,8,0,0,1,0,0,7,0,0,0],[0,0,0,0,0,0,0,0,8,9,0,0,0,0,8,0,0,0,0,0],[0,0,0,0,0,0,0,0,6,6,0,0,0,0,0,0,0,0,0,0],[0,0,4,4,0,4,4,0,0,0,0,6,0,0,7,0,0,0,0,0],[0,0,10,11,0,0,8,7,0,0,5,0,0,0,0,0,0,0,0,0],[0,g,12,13,0,1,0,0,0,0,0,10,11,0,0,0,0,0,0,1]],level2:[[0,{tile:3,map:1},8,0,8,7,6,0,0,0,9,0,0,0,0,0,0,6,0,9],[0,0,0,0,4,5,0,7,0,0,8,0,1,0,0,0,0,0,0,0],[5,0,0,9,0,0,6,0,7,0,0,0,0,0,0,4,7,0,0,1],[0,0,7,0,0,1,5,0,0,0,7,0,0,0,0,0,6,0,0,0],[0,0,4,0,5,0,0,8,{tile:3,map:3},7,8,0,0,1,0,0,7,0,0,0],[0,0,0,0,0,0,0,0,8,9,0,0,0,0,8,0,0,0,0,0],[0,6,6,0,0,0,0,0,6,6,0,0,0,0,0,0,0,0,4,0],[1,5,4,0,0,0,0,0,0,0,0,6,0,0,7,4,0,0,1,0],[0,0,10,11,0,0,8,7,0,0,5,0,0,0,0,0,0,0,0,0],[0,0,12,13,0,1,0,0,0,0,0,10,11,0,0,0,0,0,0,1]],level3:[[0,0,0,0,8,7,6,0,0,0,9,0,0,0,0,0,0,6,0,9],[0,0,0,0,5,0,0,7,0,0,8,0,1,0,0,0,0,0,0,0],[5,0,0,9,0,0,6,0,7,0,0,0,0,0,0,0,7,0,0,1],[0,0,9,0,0,0,1,0,0,0,7,0,0,0,0,0,6,0,0,0],[0,0,0,0,0,0,0,0,g,0,0,0,0,1,0,0,7,0,0,0],[0,0,0,0,0,0,0,0,0,7,0,0,4,0,8,0,0,0,0,0],[0,6,6,0,0,0,0,0,5,6,4,0,0,0,0,4,0,0,0,0],[1,5,0,0,0,0,0,0,0,0,0,6,0,0,7,0,0,0,0,0],[0,0,10,6,0,0,8,7,6,6,5,0,0,0,0,0,0,0,0,0],[0,0,12,13,0,1,0,0,0,0,0,10,11,0,0,0,0,0,0,1]]};var T=Object(i.b)((function(e){return Object(d.a)({},e.player)}))(function(e){var t=null;function n(e,t){switch(e){case"SOUTH":return"".concat(0,"px");case"EAST":return"".concat(40,"px");case"WEST":return"".concat(80,"px");case"NORTH":return"".concat(120,"px")}}function a(e,t){return t[0]>=0&&t[0]<=760&&t[1]>=0&&t[1]<=360}function r(e,a,r,o){if(null==t){var c=S.getState().player.moveCount,i=(c-=1)<0;if(i)return void S.dispatch({type:"SET_MOVES",payload:{moveCount:0,addScore:0,showAnimation:!0,gameOver:i}});var l=function(){var e=S.getState().player.walkIndex;return e>=8?0:e+1}();if(S.dispatch({type:"MOVE_PLAYER",payload:{position:a,direction:e,walkIndex:l,spriteLocation:n(e),animated:!0,moveCount:c,gameOver:i}}),1===r){var s=Object(O.a)(S.getState().map.tiles,(function(e){var t=a[1]/40,n=a[0]/40;e[t][n]=0}));s&&(S.dispatch({type:"SET_MOVES",payload:{moveCount:c+10,showAnimation:!0,addScore:10,gameOver:i}}),S.dispatch({type:"ADD_TILES",payload:{tiles:s}}))}if(4===r){var u=Object(O.a)(S.getState().map.tiles,(function(e){var t=a[1]/40,n=a[0]/40;e[t][n]=0}));u&&(S.dispatch({type:"SET_MOVES",payload:{moveCount:c-10,addScore:-10,showAnimation:!0,gameOver:i}}),S.dispatch({type:"ADD_TILES",payload:{tiles:u}}))}3===r&&o>0&&S.dispatch({type:"ADD_TILES",payload:{tiles:b["level"+o]}}),t=setTimeout((function(){t=null,document.getElementById("shadow").scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}),S.dispatch({type:"IS_ANIMATED",payload:{animated:!1}})}),500)}}function o(e){var t=S.getState().player.position,n=function(e,t){switch(t){case"WEST":return[e[0]-40,e[1]];case"EAST":return[e[0]+40,e[1]];case"NORTH":return[e[0],e[1]-40];case"SOUTH":return[e[0],e[1]+40];default:console.log(t)}}(t,e);if(a(0,n)){var o=function(e,t){var n,a,r=S.getState().map.tiles,o=t[1]/40,c=t[0]/40;return"object"===typeof r[o][c]?(n=r[o][c].tile,a=r[o][c].map):n=r[o][c],[n<5,n,a]}(0,n);a(0,n)&&o[0]&&r(e,n,o[1],o[2])}}return window.addEventListener("keydown",(function(e){!function(e){switch(e.preventDefault(),e.keyCode){case 37:return o("WEST");case 38:return o("NORTH");case 39:return o("EAST");case 40:return o("SOUTH");default:console.log(e.keyCode,"x")}}(e)})),e}((function(e){var t=Object(i.c)((function(e){return e.player.spriteLocation})),n=Object(i.c)((function(e){return e.player.animated})),a=Object(i.c)((function(e){return e.player.showAnimation})),o=Object(i.c)((function(e){return e.player.moveCount})),c=Object(i.c)((function(e){return e.player.addScore})),l=o/10*100;return console.log(c),r.a.createElement("div",{id:"player",className:"player ".concat(n?"animated":""),style:{transition:"top 0.5s linear, left 0.5s linear",position:"absolute",top:e.position[1],left:e.position[0],backgroundImage:"url('".concat(m.a,"')"),backgroundPositionY:t,width:"40px",height:"40px"}},r.a.createElement((function(){return r.a.createElement("div",{className:"moves",style:{background:o>10?"#0f0":"#f00",position:"absolute",top:"-5px",width:l+"%",maxWidth:"100%",height:"4px",overflow:"hidden",transition:"transition: width 1s ease-in-out"}},o)}),null),r.a.createElement("div",{className:"add-points ".concat(n&&a?"animated":"")},c),r.a.createElement("div",{id:"shadow",className:"shadow ".concat(a?"animated":"")}))})));function _(e){var t=Object(i.c)((function(e){return e.player.position}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"world",style:{transition:"all 0.5s linear",position:"relative",width:"800px",height:"400px",margin:"20px auto",clipPath:"circle(150px at "+(t[0]+20)+"px "+(t[1]+20)+"px)"}},r.a.createElement(u,null),r.a.createElement(T,null)))}var k=function(){var e=Object(i.c)((function(e){return e.player.gameOver}));S.dispatch({type:"ADD_TILES",payload:{tiles:b.level1}});var t=function(e,t){switch(console.log(e),t){case"DOWN":window.dispatchEvent(new KeyboardEvent("keydown",{keyCode:40}));break;case"LEFT":window.dispatchEvent(new KeyboardEvent("keydown",{keyCode:37}));break;case"RIGHT":window.dispatchEvent(new KeyboardEvent("keydown",{keyCode:39}));break;case"UP":window.dispatchEvent(new KeyboardEvent("keydown",{keyCode:38}))}};return r.a.createElement(r.a.Fragment,null,!e&&r.a.createElement(r.a.Fragment,null,r.a.createElement(_,null),r.a.createElement("div",{className:"keypad"},r.a.createElement("button",{onMouseDown:function(e){return t(e,"UP")},onMouseUp:function(e){return t(e,"UP")}},r.a.createElement("i",{className:"up"})),r.a.createElement("br",null),r.a.createElement("button",{onMouseDown:function(e){return t(e,"LEFT")},onMouseUp:function(e){return t(e,"LEFT")}},r.a.createElement("i",{className:"left"})),r.a.createElement("button",{onMouseDown:function(e){return t(e,"DOWN")},onMouseUp:function(e){return t(e,"DOWN")}},r.a.createElement("i",{className:"down"})),r.a.createElement("button",{onMouseDown:function(e){return t(e,"RIGHT")},onMouseUp:function(e){return t(e,"RIGHT")}},r.a.createElement("i",{className:"right"})))),e&&r.a.createElement("div",{className:"game-over"},r.a.createElement("div",null,"GAME OVER",r.a.createElement((function(){return r.a.createElement("button",{onClick:function(){S.dispatch({type:"ADD_TILES",payload:{tiles:b.level1}}),S.dispatch({type:"RESET_PLAYER",payload:{}})}},"RESTART")}),null))))};n(27);c.a.render(r.a.createElement(i.a,{store:S},r.a.createElement(k,null)),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.5bbddf38.chunk.js.map